<link rel='import' href='../bower_components/polymer/polymer.html'>
<link rel='import' href='../bower_components/core-list/core-list.html'>
<link rel='import' href='../bower_components/core-field/core-field.html'>
<link rel='import' href='../bower_components/paper-input/paper-input.html'>
<link rel='import' href='../bower_components/paper-dropdown-menu/paper-dropdown-menu.html'>
<link rel='import' href='../bower_components/paper-item/paper-item.html'>
<link rel='import' href='../bower_components/core-icons/core-icons.html'>
<link rel='import' href='../bower_components/paper-icon-button/paper-icon-button.html'>

<polymer-element name='switchyd-servers'>
    <template>
        <core-list id='list' data='{{servers}}'>
            <template>
                <core-field>
                    <paper-input value='{{model.type}} {{model.ip}}:{{model.port}}'></paper-input>
                    <paper-icon-button index='{{index}}' on-down='{{row_add}}' icon="add"></paper-icon-button>
                    <paper-icon-button index='{{index}}' on-click='{{row_remove}}' icon="remove"></paper-icon-button>
                <core-field>
            </template>
        </core-list>
    </template>

    <script>
        Polymer({
            servers : [],
            
            created:function(){
                this.servers = [
                        {
                            type:'SOCKS5',
                            ip:'127.0.0.1',
                            port:10087,
                        },
                        {   type:'PROXY',
                            ip:'127.0.0.1',
                            port:10086,
                        }
                ];
            },

            row_add:function(event,detail,sender,target){
                var index = sender.attributes.index.value;
                this.servers.splice(index,0,this.servers[index]);
            },

            row_remove:function(event,detail,sender,target){
                var index = sender.attributes.index.value;
                if(this.servers.length > 1){
                    this.servers.splice(index,1);
                } 
            }
        });
    </script>
</polymer-element>
